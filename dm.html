<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style/main.css" />
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script type="text/javascript" src="script\main.js"></script>
    <script type="text/javascript" src="script\generators.js"></script>
    <script type="text/javascript" src="script\login.js"></script>
    <title>Les Fronti√®res Brumeuses</title>
  </head>
  <body>
    <header id="header"></header>
    <main class="content-page" id="dm-page">
      <br />
      <section id="dice-roller">
        <h2>Dice Roller</h2>
        <input id="diceNum" type="text" value="3" />
        <button id="diceButton" onclick="rollDice();">Roll Dice</button>
        <div id="dieContainer" class="dice"></div>
        <br />
      </section>
      <section class="content-roller" id="content-roller">
        <h2 class="title-dm">Content Roller</h2>
        <br />
        <div class="output">
          <textarea
            id="contentOuput"
            type="text"
            value="underground_turn"
            style="width: 25vw; height: 25vh"
          >
              general
          </textarea>
          <textarea
            id="tableContentOuput"
            type="text"
            value="underground_turn"
            style="width: 25vw; height: 25vh"
          >
            general
        </textarea
          >
          <br />
          <label for="args">Args</label>
          <input type="text" id="args" value="" />
        </div>
        <div class="input" id="input-container">
          <div id="contentContainer" class="content-container"></div>
        </div>
      </section>
      <section class="content-roller" id="monster-shower">
        <h2 class="title-dm">Monster Shower</h2>
        <br />
        <div class="output">
          <textarea
            id="monsterOuput"
            type="text"
            value="underground_turn"
            style="width: 25vw; height: 25vh"
          >
              general
          </textarea>
          <br />
        </div>
        <div class="input" id="input-container-monster">
          <div id="monsterContainer" class="content-container"></div>
        </div>
      </section>
      <section>
        <h2>Procedures</h2>
        <ul>
          <li>
            <strong>Hexcrawling</strong>
            <ul>
              <li>
                Roll <strong>"hex-encounter"</strong> when entering first hex of
                the day and when searching
              </li>
            </ul>
          </li>
        </ul>
      </section>
      <br />
      <br />
    </main>
    <footer id="footer"></footer>
    <script type="text/javascript">
      function rollDice() {
        var numDice = document.getElementById("diceNum").value;
        var container = document.getElementById("dieContainer");
        container.innerHTML = "";
        var sum = 0;
        for (var i = 0; i < numDice; i++) {
          var diceRoll = Math.floor(Math.random() * 6) + 1;
          sum += diceRoll;
          container.innerHTML += '<div class="dice">' + diceRoll + "</div>";
        }
        document.getElementById("diceButton").innerHTML = sum;
      }

      function generateContent(isUndergroundTurn) {
        if (isUndergroundTurn) {
          var contentType = "underground_turn";
        } else {
          var contentType = document.getElementById("contentType").value;
        }
        contentGenerated = getGeneratedContent(contentType);
        document.getElementById("contentOuput").value = contentGenerated;
      }

      function getTableAsString(tableToSearch) {
        let allTable = getData();
        return getStringFromList(allTable, tableToSearch);
      }

      var createAllButtons = function () {
        let allPossibleCommands = getCommands("");
        for (command in allPossibleCommands) {
          var button = document.createElement("button");
          button.innerHTML = allPossibleCommands[command];
          button.setAttribute("id", allPossibleCommands[command]);
          button.onclick = function () {
            document.getElementById("contentOuput").value = getGeneratedContent(
              document.getElementById(this.id).innerHTML
            );
            document.getElementById("tableContentOuput").value =
              getTableAsString(document.getElementById(this.id).innerHTML);
          };
          document.getElementById("input-container").appendChild(button);
        }
      };
      createAllButtons();

      function getStringFromList(list, key) {
        let result = key.toUpperCase();
        for (content in list[key]) {
          result += "\n" + content + " : " + list[key][content];
        }
        return result;
      }

      var createAllMonsters = function () {
        var allMonsters = getMonsters();
        for (monsterName in allMonsters) {
          var button = document.createElement("button");
          button.innerHTML = monsterName;
          button.setAttribute("id", monsterName);
          button.onclick = function () {
            document.getElementById("monsterOuput").value = getStringFromList(
              allMonsters,
              monsterName
            );
          };
          document
            .getElementById("input-container-monster")
            .appendChild(button);
        }
      };
      createAllMonsters();
    </script>
  </body>
</html>
